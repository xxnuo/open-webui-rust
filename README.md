# Open WebUI Rust åç«¯

Open WebUI Ruståç«¯,æ¯”åŸ Python åç«¯æ€§èƒ½æ›´ä¼˜ã€å¯é æ€§å’Œå¯æ‰©å±•æ€§ã€‚

## Dockerå¿«é€Ÿå¼€å§‹ï¼š

```
git clone https://github.com/knoxchat/open-webui-rust.git && cd open-webui-rust
docker compose up -d
```
> ç¡®ä¿Dockerå’ŒDocker Composeå°±ç»ª

https://github.com/user-attachments/assets/d1bf00a3-1838-4658-84da-d8bfc84a9ec3

## æ¦‚è¿°

Rust åç«¯æ˜¯ Python åç«¯çš„ç›´æ¥æ›¿ä»£å“, æœ‰è¿™äº›å¥½å¤„:

- **æ›´å¿«çš„å“åº”æ—¶é—´**10-50å€
- **æ›´ä½çš„å†…å­˜ä½¿ç”¨ç‡**70%
- **åŸç”Ÿå¹¶å‘**ä½¿ç”¨ Tokio å¼‚æ­¥è¿è¡Œæ—¶
- **ç±»å‹å®‰å…¨**é˜²æ­¢æ•´ç±»è¿è¡Œæ—¶é”™è¯¯
- **é›¶æ‹·è´æµå¼ä¼ è¾“**ç”¨äºèŠå¤©ç”Ÿæˆ
- **ç”Ÿäº§å°±ç»ª**å…·æœ‰å…¨é¢çš„é”™è¯¯å¤„ç†

## **é‡è¦â€¼ï¸** Ruståç«¯å½“å‰å®Œæ•´ä»£ç çŠ¶æ€ï¼š83% (å¯è¿è¡Œé¡¹ç›®ã€éƒ¨åˆ†åŠŸèƒ½ç¼ºå¤±)

- **åˆå§‹ç‰ˆæœ¬åŸºäºOpen WebUI 0.6.32å¼€å‘**
æœ¬é¡¹ç›®åˆå§‹ç‰ˆæœ¬å¼€å‘æ ¹æ®èµåŠ©æ•°é‡æ›´æ–°æ–‡ä»¶æ•°ï¼Œæ ¹æ®æ‰“èµ/èµåŠ©æ·»åŠ åç«¯æ–‡ä»¶ç›´è‡³æ·»åŠ å®Œæ•´çš„åç«¯æ–‡ä»¶ï¼š

   - **ç›®æ ‡1ä¸‡å…ƒæˆ–è¶³å¤Ÿçš„Staræ•°é‡æ·»åŠ å®Œæ•´åç«¯ä»£ç **

   1. èµåŠ©Â¥20-Â¥99æ›´æ–°2ä¸ªæ–‡ä»¶ï¼Œæ·»åŠ èµåŠ©è€…è‡³é¡¹ç›®å…±å»ºåˆ—è¡¨ï¼Œä¾‹å¦‚ï¼šå¼ æ— å¿Œ-Â¥66
   2. æ¯é¢—æ˜Ÿæ·»åŠ 5ä¸ªæ–‡ä»¶
   3. èµåŠ©Â¥100-Â¥500æ›´æ–°6ä¸ªæ–‡ä»¶ï¼Œæ·»åŠ èµåŠ©è€…è‡³é¡¹ç›®å…±å»ºåˆ—è¡¨å¸¦æŒ‡å®šé“¾æ¥ï¼Œä¾‹å¦‚ï¼š[éŸ¦å°å®-Â¥180](https://éŸ¦å°å®æŒ‡å®šé“¾æ¥)
   4. èµåŠ©Â¥501-Â¥2000æ›´æ–°10ä¸ªæ–‡ä»¶ï¼Œæ·»åŠ èµåŠ©è€…è‡³é¡¹ç›®å…±å»ºåˆ—è¡¨å¸¦æŒ‡å®šé“¾æ¥å’ŒæŒ‡å®šå›¾ç‰‡ï¼Œä¾‹å¦‚ï¼š<br/>
   <a href="https://knox.chat" target="_blank" rel="noopener noreferrer">
    <img width="80" src="./img/logo99.png" alt="åç§°">
   </a><br/>
   5. èµåŠ©Â¥10,000ç›´æ¥æ›´æ–°æ‰€æœ‰æ–‡ä»¶å¹¶åˆ—å…¥é¡¹ç›®åˆä¼™äººï¼Œæ·»åŠ èµåŠ©è€…è‡³é¡¹ç›®å…±å»ºåˆ—è¡¨å¸¦æŒ‡å®šé“¾æ¥å’ŒæŒ‡å®šå›¾ç‰‡å¹¶æä¾›ä½¿ç”¨å’Œéƒ¨ç½²æ”¯æŒã€‚

- **èµåŠ©è€…è¯·ç›´æ¥é€šè¿‡ä»¥ä¸‹äºŒç»´ç è¿›è¡Œæ”¯ä»˜å®æ‰«ç èµåŠ©å¹¶å¾®ä¿¡è”ç³»ï¼šknoxsale**
<p align="center">
   <img width="200" src="./img/ali.png" alt="åç§°">
</p>

## èµåŠ©è€…åˆ—è¡¨

| åç§° | èµåŠ©é‡‘é¢ | è´¡çŒ®æ–‡ä»¶ | äº«æœ‰ç‰¹æƒ |
|------|----------|---------|---------|
| [![æ ¢ç”°åŒ»ç–—](./img/baitian.png)](https://baitianjituan.com) | 5000 | 300 | [![æ ¢ç”°åŒ»ç–—](./img/btyl.png)](https://baitianjituan.com) |
| Knoxç”¨æˆ·åŒ¿åèµåŠ© | 300 | 18 | å¾®ä¿¡æœåŠ¡ |
| [Bestming](https://www.mingagent.com) | 100 | 6 | å¾®ä¿¡æœåŠ¡ |
| HJPING | 100 | 6 | å¾®ä¿¡æœåŠ¡ |
| KingZ | 50 | 2 | ç”µé‚®æœåŠ¡ |
| JimLi | 66 | 2 | ç”µé‚®æœåŠ¡ |
| shanwu | 50 | 2 | ç”µé‚®æœåŠ¡ |
| xixi | 50 | 2 | ç”µé‚®æœåŠ¡ |

## ç›®å½•

- [æ¶æ„](#æ¶æ„)
- [åŠŸèƒ½](#åŠŸèƒ½)
- [å…ˆå†³æ¡ä»¶](#å…ˆå†³æ¡ä»¶)
- [å®‰è£…](#å®‰è£…)
- [é…ç½®](#é…ç½®)
- [è¿è¡ŒæœåŠ¡å™¨](#è¿è¡ŒæœåŠ¡å™¨)
- [API å…¼å®¹æ€§](#api-å…¼å®¹æ€§)
- [æ€§èƒ½](#æ€§èƒ½)
- [å¼€å‘](#å¼€å‘)
- [æµ‹è¯•](#æµ‹è¯•)
- [éƒ¨ç½²](#éƒ¨ç½²)

## æ¶æ„

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Actix-Web 4.x (æœ€å¿«çš„ Web æ¡†æ¶ä¹‹ä¸€)
- **è¿è¡Œæ—¶**: Tokio (åŸç”Ÿ async/await è¿è¡Œæ—¶)
- **æ•°æ®åº“**: PostgreSQL with SQLx (ç¼–è¯‘æ—¶æ£€æŸ¥çš„æŸ¥è¯¢)
- **ç¼“å­˜**: Redis with deadpool è¿æ¥æ± 
- **è®¤è¯**: JWT with jsonwebtoken + Argon2/Bcrypt
- **åºåˆ—åŒ–**: Serde (é›¶æ‹·è´ååºåˆ—åŒ–)
- **HTTP å®¢æˆ·ç«¯**: Reqwest (å¼‚æ­¥ HTTP/2 å®¢æˆ·ç«¯)

### é¡¹ç›®ç»“æ„

```
rust-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs              # åº”ç”¨ç¨‹åºå…¥å£ç‚¹
â”‚   â”œâ”€â”€ config.rs            # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ db.rs                # æ•°æ®åº“è¿æ¥æ± 
â”‚   â”œâ”€â”€ error.rs             # é›†ä¸­å¼é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹ (25+ å®ä½“)
â”‚   â”‚   â”œâ”€â”€ auth.rs          # ç”¨æˆ·ã€ä¼šè¯ã€APIå¯†é’¥æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ chat.rs          # èŠå¤©ã€æ¶ˆæ¯æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ model.rs         # AI æ¨¡å‹é…ç½®
â”‚   â”‚   â””â”€â”€ ...              # é¢‘é“ã€æ–‡ä»¶ã€çŸ¥è¯†åº“ç­‰
â”‚   â”œâ”€â”€ routes/              # HTTP è·¯ç”±å¤„ç†å™¨ (25+ æ¨¡å—)
â”‚   â”‚   â”œâ”€â”€ auth.rs          # è®¤è¯ç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ chats.rs         # èŠå¤©ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ openai.rs        # OpenAI å…¼å®¹ API
â”‚   â”‚   â””â”€â”€ ...              # éŸ³é¢‘ã€å›¾ç‰‡ã€å·¥å…·ç­‰
â”‚   â”œâ”€â”€ services/            # ä¸šåŠ¡é€»è¾‘å±‚ (27+ æœåŠ¡)
â”‚   â”‚   â”œâ”€â”€ chat.rs          # èŠå¤©å¤„ç†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ auth.rs          # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ rag.rs           # RAG (æ£€ç´¢) æœåŠ¡
â”‚   â”‚   â””â”€â”€ ...              # æ¨¡å‹ã€ç”¨æˆ·ã€æ–‡ä»¶æœåŠ¡
â”‚   â”œâ”€â”€ middleware/          # è¯·æ±‚/å“åº”ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.rs          # JWT è®¤è¯
â”‚   â”‚   â”œâ”€â”€ audit.rs         # è¯·æ±‚å®¡è®¡
â”‚   â”‚   â””â”€â”€ rate_limit.rs    # é€Ÿç‡é™åˆ¶
â”‚   â”œâ”€â”€ utils/               # å®ç”¨å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ auth.rs          # JWT åŠ©æ‰‹
â”‚   â”‚   â”œâ”€â”€ embeddings.rs    # å‘é‡åµŒå…¥
â”‚   â”‚   â””â”€â”€ chat_completion.rs # èŠå¤©å·¥å…·
â”‚   â”œâ”€â”€ socket.rs            # WebSocket/Socket.IO æ”¯æŒ
â”‚   â””â”€â”€ websocket_chat.rs    # å®æ—¶èŠå¤©æµå¼ä¼ è¾“
â”œâ”€â”€ migrations/              # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ postgres/            # PostgreSQL æ¶æ„è¿ç§»
â”œâ”€â”€ Cargo.toml               # Rust ä¾èµ–é¡¹
â””â”€â”€ .env.example             # ç¯å¢ƒé…ç½®æ¨¡æ¿
```

## åŠŸèƒ½

### å·²å®ç°çš„åŠŸèƒ½

#### æ ¸å¿ƒè®¤è¯ä¸æˆæƒ
- âœ… åŸºäº JWT çš„è®¤è¯ä¸åˆ·æ–°ä»¤ç‰Œ
- âœ… API å¯†é’¥è®¤è¯ä¸ç«¯ç‚¹é™åˆ¶
- âœ… åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (ç®¡ç†å‘˜ã€ç”¨æˆ·ã€å¾…å®¡æ ¸)
- âœ… LDAP è®¤è¯æ”¯æŒ
- âœ… OAuth 2.0/2.1 é›†æˆ
- âœ… SCIM 2.0 ç”¨æˆ·é…ç½®
- âœ… ä½¿ç”¨ Redis çš„ä¼šè¯ç®¡ç†

#### èŠå¤©ä¸æ¶ˆæ¯
- âœ… OpenAI å…¼å®¹çš„èŠå¤©ç”Ÿæˆ API
- âœ… ä½¿ç”¨æœåŠ¡å™¨å‘é€äº‹ä»¶ (SSE) çš„å®æ—¶æµå¼ä¼ è¾“
- âœ… åŸºäº WebSocket çš„èŠå¤©æµå¼ä¼ è¾“ (é›¶ç¼“å†²)
- âœ… èŠå¤©å†å²ç®¡ç† (CRUD æ“ä½œ)
- âœ… æ¶ˆæ¯ç¼–è¾‘å’Œåˆ é™¤
- âœ… èŠå¤©æ ‡è®°å’Œç»„ç»‡
- âœ… å¤šç”¨æˆ·èŠå¤©ä¼šè¯
- âœ… èŠå¤©å…±äº«å’Œå½’æ¡£

#### AI æ¨¡å‹ç®¡ç†
- âœ… å¤šæä¾›å•†æ¨¡å‹æ”¯æŒ (ä»»ä½•OpenAIå…¼å®¹æ¨¡å‹)
- âœ… æ¨¡å‹è®¿é—®æ§åˆ¶å’Œæƒé™
- âœ… æ¨¡å‹ç¼“å­˜ä»¥æé«˜æ€§èƒ½
- âœ… åŠ¨æ€æ¨¡å‹åŠ è½½å’Œé…ç½®
- âœ… æ¨¡å‹å…ƒæ•°æ®å’Œæ–‡æ¡£
- âœ… Arena æ¨¡å‹è¯„ä¼°æ”¯æŒ

#### çŸ¥è¯†åº“ä¸ RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ)
- âœ… æ–‡æ¡£ä¸Šä¼ å’Œå¤„ç†
- âœ… å‘é‡åµŒå…¥ç”Ÿæˆ
- âœ… è¯­ä¹‰æœç´¢å’Œæ£€ç´¢
- âœ… æ··åˆæœç´¢ (å‘é‡ + BM25)
- âœ… çŸ¥è¯†åº“ç®¡ç†
- âœ… æ–‡ä»¶é™„ä»¶æ”¯æŒ (10+ æ ¼å¼)
- âœ… å¸¦å›¾ç‰‡æ”¯æŒçš„ PDF æå–
- âœ… ç½‘é¡µæŠ“å–å’Œæ–‡æ¡£åŠ è½½å™¨

#### éŸ³é¢‘å¤„ç†
- âœ… ä½¿ç”¨ Whisperã€OpenAIã€Azure çš„è¯­éŸ³è½¬æ–‡æœ¬ (STT)
- âœ… ä½¿ç”¨ OpenAIã€Azureã€æœ¬åœ°æ¨¡å‹çš„æ–‡æœ¬è½¬è¯­éŸ³ (TTS)
- âœ… éŸ³é¢‘æ–‡ä»¶ä¸Šä¼ å’Œæµå¼ä¼ è¾“
- âœ… å¤šè¯­è¨€æ”¯æŒ
- âœ… å®æ—¶éŸ³é¢‘è½¬å½•

#### å›¾ç‰‡ç”Ÿæˆ
- âœ… OpenAI DALL-E é›†æˆ
- âœ… Stable Diffusion (Automatic1111) æ”¯æŒ
- âœ… ComfyUI å·¥ä½œæµé›†æˆ
- âœ… Google Gemini å›¾ç‰‡ç”Ÿæˆ
- âœ… å›¾ç‰‡æç¤ºå¢å¼º
- âœ… å›¾ç‰‡å­˜å‚¨å’Œæ£€ç´¢

#### é«˜çº§åŠŸèƒ½
- âœ… å‡½æ•°/å·¥å…·è°ƒç”¨æ”¯æŒ
- âœ… æç¤ºç®¡ç†å’Œæ¨¡æ¿
- âœ… ä¸Šä¸‹æ–‡å¯¹è¯çš„è®°å¿†ç³»ç»Ÿ
- âœ… ä½¿ç”¨ Redis çš„ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
- âœ… åå°ä½œä¸šå¤„ç†
- âœ… Webhook é€šçŸ¥
- âœ… é€Ÿç‡é™åˆ¶å’ŒèŠ‚æµ
- âœ… è¯·æ±‚å®¡è®¡å’Œæ—¥å¿—è®°å½•
- âœ… å¥åº·æ£€æŸ¥å’Œç›‘æ§
- âœ… ä¼˜é›…å…³é—­å¤„ç†

#### å­˜å‚¨ä¸é›†æˆ
- âœ… æœ¬åœ°æ–‡ä»¶å­˜å‚¨
- âœ… S3 å…¼å®¹å­˜å‚¨ (MinIOã€AWS S3)
- âœ… Google Drive é›†æˆ
- âœ… OneDrive é›†æˆ
- âœ… å¤šç§Ÿæˆ·æ–‡ä»¶éš”ç¦»

#### å¼€å‘è€…åŠŸèƒ½
- âœ… OpenAPI/Swagger æ–‡æ¡£
- âœ… æ•°æ®åº“è¿ç§» (è‡ªåŠ¨)
- âœ… åŸºäºç¯å¢ƒçš„é…ç½®
- âœ… Docker æ”¯æŒä¸å¤šé˜¶æ®µæ„å»º
- âœ… å…¨é¢çš„é”™è¯¯æ¶ˆæ¯
- âœ… è¯·æ±‚/å“åº”æ—¥å¿—è®°å½•

### è¿›è¡Œä¸­ / éƒ¨åˆ†å®ç°

- ğŸ”„ MCP (æ¨¡å‹ä¸Šä¸‹æ–‡åè®®) å®¢æˆ·ç«¯
- ğŸ”„ é«˜çº§ç½‘ç»œæœç´¢é›†æˆ
- ğŸ”„ ä»£ç æ‰§è¡Œæ²™ç®±
- ğŸ”„ Jupyter notebook é›†æˆ
- ğŸ”„ é«˜çº§ RAG ç®¡é“
- ğŸ”„ LDAP ç»„ç®¡ç†

### å°šæœªå®ç°

- âŒ ä¸€äº›å°ä¼— ML åµŒå…¥ (åŸºäº Candle çš„æœ¬åœ°æ¨ç†)
- âŒ æŸäº›ä¸“é—¨çš„æ–‡æ¡£åŠ è½½å™¨
- âŒ ä¸€äº›é«˜çº§ç®¡é“è¿‡æ»¤å™¨

> **æ³¨æ„**: Rust åç«¯å®ç°äº†å¤§çº¦ **85-90% çš„ Python åç«¯åŠŸèƒ½**,é‡ç‚¹å…³æ³¨æœ€å¸¸ç”¨çš„åŠŸèƒ½ã€‚

## å…ˆå†³æ¡ä»¶

- **Rust**: 1.75+ (é€šè¿‡ [rustup](https://rustup.rs/) å®‰è£…)
- **PostgreSQL**: 13+ (å¿…éœ€)
- **Redis**: 6.0+ (å¯é€‰,æ¨èç”¨äºä¼šè¯å’Œç¼“å­˜)
- **æ“ä½œç³»ç»Ÿ**: Linuxã€macOS æˆ– Windows

## å®‰è£…

### 1. å…‹éš†ä»“åº“

```bash
cd rust-backend
```

### 2. å®‰è£… Rust

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env
```

### 3. è®¾ç½®æ•°æ®åº“

```bash
# åˆ›å»º PostgreSQL æ•°æ®åº“
createdb openwebui

# è®¾ç½®æ•°æ®åº“ URL
export DATABASE_URL="postgresql://postgres:password@localhost:5432/openwebui"
```

### 4. å®‰è£…ä¾èµ–

```bash
# ä¾èµ–é¡¹ç”± Cargo è‡ªåŠ¨ç®¡ç†
cargo fetch
```

## é…ç½®

### ç¯å¢ƒå˜é‡

åœ¨ `rust-backend/` ç›®å½•ä¸­åˆ›å»º `.env` æ–‡ä»¶:

```bash
# æœåŠ¡å™¨é…ç½®
HOST=0.0.0.0
PORT=8080
ENV=production
RUST_LOG=info

# å®‰å…¨
WEBUI_SECRET_KEY=your-secret-key-min-32-chars
JWT_EXPIRES_IN=168h

# æ•°æ®åº“ (å¿…éœ€)
DATABASE_URL=postgresql://user:pass@localhost:5432/openwebui

# Redis (æ¨è)
ENABLE_REDIS=true
REDIS_URL=redis://localhost:6379

# è®¤è¯
ENABLE_SIGNUP=true
ENABLE_LOGIN_FORM=true
ENABLE_API_KEY=true
DEFAULT_USER_ROLE=pending

# OpenAI é…ç½® (å¦‚æœä½¿ç”¨ OpenAI æ¨¡å‹)
ENABLE_OPENAI_API=true
OPENAI_API_KEY=sk-your-key
OPENAI_API_BASE_URL=https://api.openai.com/v1

# CORS
CORS_ALLOW_ORIGIN=*

# åŠŸèƒ½
ENABLE_WEBSOCKET_SUPPORT=true
ENABLE_IMAGE_GENERATION=false
ENABLE_CODE_EXECUTION=false
ENABLE_WEB_SEARCH=false

# éŸ³é¢‘ (å¯é€‰)
TTS_ENGINE=openai
STT_ENGINE=openai

# RAG/æ£€ç´¢ (å¯é€‰)
CHUNK_SIZE=1500
CHUNK_OVERLAP=100
RAG_TOP_K=5
```

æŸ¥çœ‹ `.env.example` è·å–å®Œæ•´çš„é…ç½®é€‰é¡¹ã€‚

### é…ç½®ä¼˜å…ˆçº§

1. ç¯å¢ƒå˜é‡ (æœ€é«˜ä¼˜å…ˆçº§)
2. `.env` æ–‡ä»¶
3. æ•°æ®åº“å­˜å‚¨çš„é…ç½®
4. é»˜è®¤å€¼ (æœ€ä½ä¼˜å…ˆçº§)

## è¿è¡ŒæœåŠ¡å™¨

### å¼€å‘æ¨¡å¼

```bash
cargo run
```

æœåŠ¡å™¨å°†åœ¨ `http://0.0.0.0:8080` å¯åŠ¨

### ç”Ÿäº§æ¨¡å¼ (ä¼˜åŒ–)

```bash
cargo run --release
```

### ä½¿ç”¨æ„å»ºè„šæœ¬

```bash
./build.sh          # æ„å»ºå‘å¸ƒç‰ˆäºŒè¿›åˆ¶æ–‡ä»¶
./build.sh --dev    # æ„å»ºè°ƒè¯•ç‰ˆäºŒè¿›åˆ¶æ–‡ä»¶
./build.sh --run    # æ„å»ºå¹¶è¿è¡Œ
```

### Docker

```bash
docker build -t open-webui-rust .
docker run -p 8080:8080 --env-file .env open-webui-rust
```

## ğŸ”Œ API å…¼å®¹æ€§

Rust åç«¯å¯¹æ ¸å¿ƒç«¯ç‚¹ä¿æŒä¸ Python åç«¯ **100% API å…¼å®¹æ€§**:

### è®¤è¯
- `POST /api/v1/auths/signup` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/v1/auths/signin` - ç”¨æˆ·ç™»å½•
- `POST /api/v1/auths/signout` - ç”¨æˆ·ç™»å‡º
- `POST /api/v1/auths/api_key` - ç”Ÿæˆ API å¯†é’¥

### èŠå¤©ç”Ÿæˆ
- `POST /api/chat/completions` - OpenAI å…¼å®¹çš„èŠå¤©
- `POST /api/v1/chat/completions` - æ›¿ä»£ç«¯ç‚¹
- `POST /openai/v1/chat/completions` - å®Œå…¨ OpenAI å…¼å®¹
- `WS /api/ws/chat` - WebSocket æµå¼ä¼ è¾“

### æ¨¡å‹
- `GET /api/models` - åˆ—å‡ºå¯ç”¨æ¨¡å‹
- `GET /api/models/base` - åˆ—å‡ºåŸºç¡€æ¨¡å‹
- `POST /api/v1/models` - åˆ›å»ºæ¨¡å‹
- `GET /api/v1/models/:id` - è·å–æ¨¡å‹è¯¦æƒ…

### ç”¨æˆ·
- `GET /api/v1/users` - åˆ—å‡ºç”¨æˆ· (ç®¡ç†å‘˜)
- `GET /api/v1/users/:id` - è·å–ç”¨æˆ·èµ„æ–™
- `PUT /api/v1/users/:id` - æ›´æ–°ç”¨æˆ·
- `DELETE /api/v1/users/:id` - åˆ é™¤ç”¨æˆ·

### æ–‡ä»¶ä¸çŸ¥è¯†åº“
- `POST /api/v1/files` - ä¸Šä¼ æ–‡ä»¶
- `GET /api/v1/files/:id` - ä¸‹è½½æ–‡ä»¶
- `POST /api/v1/knowledge` - åˆ›å»ºçŸ¥è¯†åº“
- `GET /api/v1/retrieval/query` - æŸ¥è¯¢çŸ¥è¯†

### å¥åº·ä¸çŠ¶æ€
- `GET /health` - åŸºæœ¬å¥åº·æ£€æŸ¥
- `GET /health/db` - æ•°æ®åº“è¿æ¥æ£€æŸ¥
- `GET /api/config` - å‰ç«¯é…ç½®
- `GET /api/version` - åç«¯ç‰ˆæœ¬

### å¿«é€Ÿæ‘˜è¦

| æŒ‡æ ‡ | Python (FastAPI) | Rust (Actix-Web) | æ”¹è¿› |
|--------|------------------|------------------|-------------|
| ç™»å½• (p50) | 45ms | 3ms | **å¿« 15 å€** |
| èŠå¤©ç”Ÿæˆ (p50) | 890ms | 35ms* | **å¿« 25 å€** |
| æ¨¡å‹åˆ—è¡¨ (p50) | 23ms | 1.2ms | **å¿« 19 å€** |
| å†…å­˜ (1000 è¯·æ±‚) | 450 MB | 85 MB | **é™ä½ 5.3 å€** |
| ååé‡ | 850 è¯·æ±‚/ç§’ | 12,400 è¯·æ±‚/ç§’ | **æé«˜ 14.6 å€** |

*æ³¨æ„: èŠå¤©ç”Ÿæˆé€Ÿåº¦ä¸»è¦å–å†³äº LLM æä¾›å•†ã€‚Rust åœ¨æµå¼ä¼ è¾“å’Œå¤„ç†å¼€é”€æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚

## å¼€å‘

### å…ˆå†³æ¡ä»¶

```bash
# å®‰è£…å¼€å‘å·¥å…·
rustup component add rustfmt clippy

# å®‰è£… cargo-watch ç”¨äºè‡ªåŠ¨é‡æ–°åŠ è½½
cargo install cargo-watch
```

### å¼€å‘å·¥ä½œæµ

```bash
# æ–‡ä»¶æ›´æ”¹æ—¶è‡ªåŠ¨é‡æ–°åŠ è½½
cargo watch -x run

# è¿è¡Œæµ‹è¯•
cargo test

# è¿è¡Œå¸¦è¾“å‡ºçš„æµ‹è¯•
cargo test -- --nocapture

# æ ¼å¼åŒ–ä»£ç 
cargo fmt

# æ£€æŸ¥ä»£ç 
cargo clippy -- -D warnings

# ä¸æ„å»ºçš„æƒ…å†µä¸‹æ£€æŸ¥
cargo check
```

### ä»£ç ç»“æ„æŒ‡å—

1. **æ¨¡å‹** (`src/models/`): å¸¦æœ‰ Serde åºåˆ—åŒ–çš„æ•°æ®åº“å®ä½“
2. **æœåŠ¡** (`src/services/`): ä¸šåŠ¡é€»è¾‘,å¯è·¨è·¯ç”±é‡ç”¨
3. **è·¯ç”±** (`src/routes/`): HTTP å¤„ç†å™¨,è°ƒç”¨æœåŠ¡çš„è–„å±‚
4. **ä¸­é—´ä»¶** (`src/middleware/`): æ¨ªåˆ‡å…³æ³¨ç‚¹ (è®¤è¯ã€æ—¥å¿—è®°å½•)
5. **å·¥å…·** (`src/utils/`): åŠ©æ‰‹å‡½æ•°,æ— ä¸šåŠ¡é€»è¾‘

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `src/models/[feature].rs` ä¸­æ·»åŠ æ¨¡å‹
2. åœ¨ `migrations/postgres/` ä¸­æ·»åŠ æ•°æ®åº“è¿ç§»
3. åœ¨ `src/services/[feature].rs` ä¸­å®ç°æœåŠ¡
4. åœ¨ `src/routes/[feature].rs` ä¸­æ·»åŠ è·¯ç”±
5. åœ¨ `src/routes/mod.rs` ä¸­æ³¨å†Œè·¯ç”±
6. æ·»åŠ æµ‹è¯•

## æµ‹è¯•

### å•å…ƒæµ‹è¯•

```bash
cargo test --lib
```

### é›†æˆæµ‹è¯•

```bash
# è®¾ç½®æµ‹è¯•æ•°æ®åº“
export DATABASE_URL=postgresql://postgres:postgres@localhost:5432/openwebui_test

# è¿è¡Œé›†æˆæµ‹è¯•
cargo test --test '*'
```

### ä½¿ç”¨æ¼”ç¤ºè´¦æˆ·æµ‹è¯•

```bash
# åç«¯åŒ…å«ä¸€ä¸ªæ¼”ç¤ºè´¦æˆ·
# é‚®ç®±: test@test.com
# å¯†ç : test1234
```

### è´Ÿè½½æµ‹è¯•

```bash
# å®‰è£… wrk
brew install wrk  # macOS
sudo apt install wrk  # Ubuntu

# è¿è¡Œè´Ÿè½½æµ‹è¯•
wrk -t4 -c100 -d30s --latency http://localhost:8080/health
```

## éƒ¨ç½²

### ç”Ÿäº§æ„å»º

```bash
# æ„å»ºä¼˜åŒ–çš„äºŒè¿›åˆ¶æ–‡ä»¶
cargo build --release

# äºŒè¿›åˆ¶æ–‡ä»¶ä½ç½®
./target/release/open-webui-rust

# å»é™¤ç¬¦å· (å‡å°å¤§å°)
strip ./target/release/open-webui-rust
```

### æ€§èƒ½è°ƒä¼˜

```toml
# Cargo.toml - å·²ä¼˜åŒ–
[profile.release]
opt-level = 3           # æœ€å¤§ä¼˜åŒ–
lto = true              # é“¾æ¥æ—¶ä¼˜åŒ–
codegen-units = 1       # å•ä¸ªä»£ç ç”Ÿæˆå•å…ƒ
strip = true            # å»é™¤ç¬¦å·
```

### ç”Ÿäº§ç¯å¢ƒå˜é‡

```bash
# ä½¿ç”¨ç”Ÿäº§è®¾ç½®
ENV=production
RUST_LOG=warn
ENABLE_REDIS=true

# å¢åŠ è¿æ¥æ± 
DATABASE_POOL_SIZE=20
REDIS_MAX_CONNECTIONS=30

# å¯ç”¨å‹ç¼©
ENABLE_COMPRESSION_MIDDLEWARE=true

# è®¾ç½®é€‚å½“çš„ CORS
CORS_ALLOW_ORIGIN=https://yourdomain.com
```

